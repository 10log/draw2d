<link rel="import" href="../../bower_components/polymer/polymer.html">
    <SCRIPT src="./libs/shifty.js"></SCRIPT>
    <SCRIPT src="./libs/raphael.js"></SCRIPT>
    <SCRIPT src="./libs/jquery-1.10.2.min.js"></SCRIPT>
    <SCRIPT src="./libs/jquery.autoresize.js"></SCRIPT>
    <SCRIPT src="./libs/jquery-touch_punch.js"></SCRIPT>
    <SCRIPT src="./libs/jquery.contextmenu.js"></SCRIPT>
    <SCRIPT src="./libs/rgbcolor.js"></SCRIPT>
    <SCRIPT src="./libs/canvg.js"></SCRIPT>
    <SCRIPT src="./libs/Class.js"></SCRIPT>
    <SCRIPT src="./libs/json2.js"></SCRIPT>
    <SCRIPT src="./libs/pathfinding-browser.min.js"></SCRIPT>
    <SCRIPT src="./libs/draw2d.js"></SCRIPT>

<polymer-element name="draw2d-canvas" attributes="">
  <template>
    <link rel="stylesheet" href="draw2d-canvas.css">
    <div  id="gfx" style="width:1500px; height:1500px;">
    </div>
  </template>
  <script>
    (function () {
      'use strict';

      Polymer({
        ready: function(){
            // create the canvas for the user interaction
            //
            try{
                var container = $(this.$.gfx.parentNode.host);
                var canvas = new draw2d.Canvas(this.$.gfx);
                canvas.fromDocumentToCanvasCoordinate = function(x, y) {
                    return new draw2d.geo.Point(
                            (x - this.getAbsoluteX() + this.getScrollLeft())*this.zoomFactor-container.offset().left,
                            (y - this.getAbsoluteY() + this.getScrollTop())*this.zoomFactor-container.offset().top);
                };
               
                this.async(function(){
	                var msg = new draw2d.shape.basic.Label(
	                        {
	                            text:"The circle/arrow decoration of the connection is part of the JSON.",
	                            color:"#000000"
	                        });
	                canvas.add(msg, 200,20);
                },null,2000);

              
            }
            catch(exc){
                console.log(exc);
            }
        }
      });

    })();
  </script>
</polymer-element>
